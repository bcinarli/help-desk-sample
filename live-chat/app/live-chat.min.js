/*! live-chat 
 *  Simple chat server and live-chat plugin for web pages 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com) 
 *  @version 0.1.0 
 *  @build Mon Jan 30 2017 23:26:26 GMT+0300 (+03) 
 */
!function(e){"use strict";e=function(){var t=[],i=function(e){t.push(e)},n=function(){s()},s=function(){t.length>0&&t.forEach(function(t){"undefined"==typeof e[t]||e[t].isInitialized()||e[t].init()})},c=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},a=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};return{init:n,registerInit:i,ready:c,guid:a}}(),window.liveChat=e,setTimeout(function(){window.liveChat.ready(function(){window.liveChat.init()})},0)}(),function(){"use strict";app.back}(),function(e){"use strict";e.chat=function(){var t={};t.sendMessage=function(t){var n=e.client.input.value;0!==n.length&&(e.socket.emit("new message",{message:n,to:t||"backoffice"}),i())};var i=function(){e.client.input.value=""};return t}()}(liveChat),function(e){"use strict";var t='<div class="live-chat-header">  <h2 class="live-chat-toggle" id="live-chat-toggle">Need Help?</h2>  <div class="live-chat-session">      <div class="live-chat-messages"></div>      <div class="live-chat-message">          <form id="live-chat-message-form">              <label class="live-chat-message-input">                  <input type="text" name="live-chat-message-input" id="live-chat-message-input" class="live-chat-message-input-item" placeholder="Type your message here" />              </label>              <button class="live-chat-message-send" id="live-chat-message-send">Send</button>          </form>      </div>  </div></div>',i=function(e){this.screenID=e.screenID,this.init()};i.prototype.init=function(){e.socket.emit("add user",this.screenID),this.render(),this.getScreenElements(),this.bindUI()},i.prototype.render=function(){var e=document.createElement("div");e.id="live-chat",e.classList.add("live-chat-wrapper"),e.innerHTML=t,document.body.appendChild(e)},i.prototype.getScreenElements=function(){this.chat=document.getElementById("live-chat"),this.toggle=this.chat.querySelector("#live-chat-toggle"),this.messages=this.chat.querySelector(".live-chat-messages"),this.form=this.chat.querySelector("#live-chat-message-form"),this.input=this.form.querySelector("#live-chat-message-input")},i.prototype.bindUI=function(){var t=this;this.toggle.addEventListener("click",function(){t.toggleClientScreen()}),this.form.addEventListener("submit",function(t){t.preventDefault(),e.chat.sendMessage()}),e.socket.on("new message",function(e){console.log(e)})},i.prototype.toggleClientScreen=function(){this.chat.classList.contains("live-chat-toggled")?this.chat.classList.remove("live-chat-toggled"):this.chat.classList.add("live-chat-toggled")},e.clientScreen=i}(liveChat),function(e){"use strict";e.start=function(){var t=!1,i={};return i.init=function(){t=!0,e.addResources.init(),setTimeout(function(){e.socket=io("//localhost:8090"),e.client=new e.clientScreen({screenID:e.guid()})},1e3)},i.isInitialized=function(){return t},i}(),e.registerInit("start")}(liveChat),function(e){"use strict";e.addResources=function(){var e={},t=function(){var e=document.createElement("script"),t=document.getElementById("liveChat-script");e.src="//localhost:8090/socket.io/socket.io.js",t.parentNode.insertBefore(e,t)},i=function(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="//localhost:8090/live-chat.css",document.getElementsByTagName("head")[0].appendChild(e)};return e.init=function(){t(),i()},e}()}(liveChat);