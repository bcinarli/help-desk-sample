{"version":3,"sources":["app.js","app/backoffice.js","app/chat.js","app/client-screen.js","app/prepare.js","app/resources.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"live-chat.js","sourcesContent":["/**\n * @author Bilal Cinarli\n */\n\n(function(app) {\n    'use strict';\n\n    app = (function() {\n        var modules = [];\n\n        var registerInit = function(module) {\n            modules.push(module);\n        };\n\n        var init = function() {\n            initModules();\n        };\n\n        var initModules = function() {\n            if(modules.length > 0) {\n                modules.forEach(function(module) {\n                    if(typeof app[module] !== 'undefined' && !app[module].isInitialized()) {\n                        app[module].init();\n                    }\n                });\n            }\n        };\n\n        var ready = function(fn) {\n            if(document.readyState !== 'loading') {\n                fn();\n            } else {\n                document.addEventListener('DOMContentLoaded', fn);\n            }\n        };\n\n        var guid = function() {\n            function s4() {\n                return Math.floor((1 + Math.random()) * 0x10000)\n                    .toString(16)\n                    .substring(1);\n            }\n\n            return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n                   s4() + '-' + s4() + s4() + s4();\n        };\n\n        return {\n            init:         init,\n            registerInit: registerInit,\n            ready:        ready,\n            guid:         guid\n        };\n    })();\n\n    window.liveChat = app;\n\n    setTimeout(function() {\n        window.liveChat.ready(function() {\n            window.liveChat.init();\n        });\n    }, 0);\n})();","/**\n * @author Bilal Cinarli\n */\n\n(function() {\n    'use strict';\n\n    app.back\n})();","/**\n * @author Bilal Cinarli\n */\n\n(function(app) {\n    'use strict';\n\n    app.chat = (function() {\n        var publicMethods = {};\n\n        publicMethods.sendMessage = function(client) {\n            var message = app.client.input.value;\n\n            if(message.length === 0) {\n                return;\n            }\n\n            app.socket.emit('new message', {\n                message: message,\n                to:      client || 'backoffice'\n            });\n\n            clearInput();\n        };\n\n        var clearInput = function() {\n            app.client.input.value = '';\n        };\n\n        return publicMethods;\n    })();\n})(liveChat);","/**\n * @author Bilal Cinarli\n */\n\n(function(app) {\n    'use strict';\n\n    var screenUI = '<div class=\"live-chat-header\">' +\n                   '  <h2 class=\"live-chat-toggle\" id=\"live-chat-toggle\">Need Help?</h2>' +\n                   '  <div class=\"live-chat-session\">' +\n                   '      <div class=\"live-chat-messages\"></div>' +\n                   '      <div class=\"live-chat-message\">' +\n                   '          <form id=\"live-chat-message-form\">' +\n                   '              <label class=\"live-chat-message-input\">' +\n                   '                  <input type=\"text\" name=\"live-chat-message-input\" id=\"live-chat-message-input\" class=\"live-chat-message-input-item\" placeholder=\"Type your message here\" />' +\n                   '              </label>' +\n                   '              <button class=\"live-chat-message-send\" id=\"live-chat-message-send\">Send</button>' +\n                   '          </form>' +\n                   '      </div>' +\n                   '  </div>' +\n                   '</div>';\n\n    var ClientScreen = function(options) {\n        this.screenID = options.screenID;\n\n        this.init();\n    };\n\n    ClientScreen.prototype.init = function() {\n        app.socket.emit('add user', this.screenID);\n        this.render();\n        this.getScreenElements();\n        this.bindUI();\n    };\n\n    ClientScreen.prototype.render = function() {\n        var wrapper = document.createElement('div');\n        wrapper.id  = 'live-chat';\n        wrapper.classList.add('live-chat-wrapper');\n\n        wrapper.innerHTML = screenUI;\n\n        document.body.appendChild(wrapper);\n    };\n\n    ClientScreen.prototype.getScreenElements = function() {\n        this.chat     = document.getElementById('live-chat');\n        this.toggle   = this.chat.querySelector('#live-chat-toggle');\n        this.messages = this.chat.querySelector('.live-chat-messages');\n        this.form     = this.chat.querySelector('#live-chat-message-form');\n        this.input    = this.form.querySelector('#live-chat-message-input');\n    };\n\n    ClientScreen.prototype.bindUI = function() {\n        var _this = this;\n\n        this.toggle.addEventListener('click', function() {\n            _this.toggleClientScreen();\n        });\n        this.form.addEventListener('submit', function(e) {\n            e.preventDefault();\n            app.chat.sendMessage();\n        });\n\n        app.socket.on('new message', function(data) {\n            console.log(data);\n        });\n    };\n\n    ClientScreen.prototype.toggleClientScreen = function() {\n        this.chat.classList.contains('live-chat-toggled')\n            ? this.chat.classList.remove('live-chat-toggled')\n            : this.chat.classList.add('live-chat-toggled');\n    };\n\n    app.clientScreen = ClientScreen;\n})(liveChat);","/**\n * @author Bilal Cinarli\n */\n\n(function(app) {\n    'use strict';\n\n    app.start = (function() {\n        var initialized   = false,\n            publicMethods = {};\n\n        publicMethods.init = function() {\n            initialized = true;\n\n            app.addResources.init();\n\n            setTimeout(function() {\n                app.socket = io('//localhost:8090');\n\n                app.client = new app.clientScreen({screenID: app.guid()});\n            }, 1000);\n        };\n\n        publicMethods.isInitialized = function() {\n            return initialized;\n        };\n\n        return publicMethods;\n    })();\n\n    app.registerInit('start');\n})(liveChat);","/**\n * @author Bilal Cinarli\n */\n\n(function(app) {\n    'use strict';\n\n    app.addResources = (function() {\n        var publicMethods = {};\n\n        var addSocket = function() {\n            var io  = document.createElement('script'),\n                lcs = document.getElementById('liveChat-script');\n\n            io.src = '//localhost:8090/socket.io/socket.io.js';\n\n            lcs.parentNode.insertBefore(io, lcs);\n        };\n\n        var addStyles = function() {\n            var link = document.createElement('link');\n\n            link.rel  = 'stylesheet';\n            link.type = 'text/css';\n            link.href = '//localhost:8090/live-chat.css';\n\n            document.getElementsByTagName('head')[0].appendChild(link);\n        };\n\n        publicMethods.init = function() {\n            addSocket();\n            addStyles();\n        };\n\n        return publicMethods;\n    })();\n})(liveChat);"]}